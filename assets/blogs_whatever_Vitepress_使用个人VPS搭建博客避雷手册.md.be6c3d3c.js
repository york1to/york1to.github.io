import{_ as s,o as a,c as n,Q as e}from"./chunks/framework.1fa2d359.js";const g=JSON.parse('{"title":"Vitepress 使用个人 VPS 搭建博客避雷手册","description":"","frontmatter":{"title":"Vitepress 使用个人 VPS 搭建博客避雷手册"},"headers":[],"relativePath":"blogs/whatever/Vitepress_使用个人VPS搭建博客避雷手册.md","filePath":"blogs/whatever/Vitepress_使用个人VPS搭建博客避雷手册.md","lastUpdated":1694011502000}'),o={name:"blogs/whatever/Vitepress_使用个人VPS搭建博客避雷手册.md"},l=e(`<h1 id="vitepress-使用个人-vps-搭建博客避雷手册" tabindex="-1">Vitepress 使用个人 VPS 搭建博客避雷手册 <a class="header-anchor" href="#vitepress-使用个人-vps-搭建博客避雷手册" aria-label="Permalink to &quot;Vitepress 使用个人 VPS 搭建博客避雷手册&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#引子">引子</a></li><li><a href="#_1-vps-租赁-cloudfare-域名解析-github-pages">1 VPS 租赁，Cloudfare 域名解析 Github Pages</a><ul><li><a href="#_1-1-cloudfare-域名解析">1.1 cloudfare 域名解析</a></li><li><a href="#_1-2-nginx-代理">1.2 nginx 代理</a></li><li><a href="#_1-3-https-证书">1.3 https 证书</a></li><li><a href="#_1-4-github-pages">1.4 Github Pages</a></li></ul></li><li><a href="#_2-vitepress-安装与配置">2 Vitepress 安装与配置</a><ul><li><a href="#_2-1-vitepress-安装">2.1 Vitepress 安装</a></li><li><a href="#_2-2-vitepress-根据内容自动编写侧边栏-index">2.2 Vitepress 根据内容自动编写侧边栏 Index</a></li><li><a href="#_2-3-vitepress-algolia-搜索">2.3 Vitepress Algolia 搜索</a></li></ul></li><li><a href="#_3-mac-下-typora-配合调教">3 mac 下 typora 配合调教</a><ul><li><a href="#_3-1-typora-直接拖拽-mac-截图的图片格式问题以及其解决方法-上传到-github">3.1 typora 直接拖拽 MAC 截图的图片格式问题以及其解决方法：上传到 github</a></li></ul></li><li><a href="#_4-git-服务器自动部署">4 git 服务器自动部署</a><ul><li><a href="#_4-3-自定义域名cname的自动部署">4.3 自定义域名CNAME的自动部署</a></li></ul></li><li><a href="#_5-接入谷歌-bing">5 接入谷歌，bing</a></li></ul></nav><h2 id="引子" tabindex="-1">引子 <a class="header-anchor" href="#引子" aria-label="Permalink to &quot;引子&quot;">​</a></h2><p>静态博客发展到现在已经非常方便了，即使是我这种没有接触过任何前端的非计算机系学生，都能非常快捷地部署一个个人博客。即便如此，要满足我的需求，仍然存在需要调试的地方。经过两天的研究，有些调出来了有些没调出来，心里嘀咕着咱也不学这个差不多得了，所以写一篇手册防止自己忘掉。</p><h2 id="_1-vps-租赁-cloudfare-域名解析-github-pages" tabindex="-1">1 VPS 租赁，Cloudfare 域名解析 Github Pages <a class="header-anchor" href="#_1-vps-租赁-cloudfare-域名解析-github-pages" aria-label="Permalink to &quot;1 VPS 租赁，Cloudfare 域名解析 Github Pages&quot;">​</a></h2><p>为了给我的专线打掩护，租的是搬瓦工的 50 刀一年的服务器，之后润了也方便访问。</p><h3 id="_1-1-cloudfare-域名解析" tabindex="-1">1.1 cloudfare 域名解析 <a class="header-anchor" href="#_1-1-cloudfare-域名解析" aria-label="Permalink to &quot;1.1 cloudfare 域名解析&quot;">​</a></h3><p><a href="https://www.bandwagonhost.net/5986.html" target="_blank" rel="noreferrer">教程</a></p><h3 id="_1-2-nginx-代理" tabindex="-1">1.2 nginx 代理 <a class="header-anchor" href="#_1-2-nginx-代理" aria-label="Permalink to &quot;1.2 nginx 代理&quot;">​</a></h3><ol><li><p>安装</p><p>包管理器安装</p></li><li><p><a href="https://www.nginx.com/resources/wiki/start/topics/examples/full/" target="_blank" rel="noreferrer">配置文件</a></p></li><li><p>systemctl enable</p></li></ol><h3 id="_1-3-https-证书" tabindex="-1">1.3 https 证书 <a class="header-anchor" href="#_1-3-https-证书" aria-label="Permalink to &quot;1.3 https 证书&quot;">​</a></h3><p>使用 cloudfare 的免费证书<a href="https://www.cloudflare.com/zh-cn/learning/ssl/what-is-an-ssl-certificate/" target="_blank" rel="noreferrer">link</a></p><p><a href="https://seviche.cc/2022-06-12-cloudflare/" target="_blank" rel="noreferrer">教程</a></p><h3 id="_1-4-github-pages" tabindex="-1">1.4 Github Pages <a class="header-anchor" href="#_1-4-github-pages" aria-label="Permalink to &quot;1.4 Github Pages&quot;">​</a></h3><h4 id="_1-4-1-github-pages部署" tabindex="-1">1.4.1 Github Pages部署 <a class="header-anchor" href="#_1-4-1-github-pages部署" aria-label="Permalink to &quot;1.4.1 Github Pages部署&quot;">​</a></h4><p>由于服务器在境外，在配置的过程中被污染了ssh都上不去，所以最后还是换成了github pages。github pages的自动化程度非常高，可以说编辑完commit之后直接就能在我的网站上看到了。</p><p>整个博客项目我创建了三个库，一个源代码，一个github.io，一个图床，感谢微软爸爸。</p><p>网上教程极其多，基本步骤是用自己的github用户名建立一个<code>username.github.io</code>的仓库然后直接把网站源文件push上去。具体脚本见</p><p>*[4 git 服务器自动部署](## 4 git 服务器自动部署)</p><h4 id="_1-4-2-github-dns以及" tabindex="-1">1.4.2 Github DNS以及 <a class="header-anchor" href="#_1-4-2-github-dns以及" aria-label="Permalink to &quot;1.4.2 Github DNS以及&quot;">​</a></h4><h2 id="_2-vitepress-安装与配置" tabindex="-1">2 Vitepress 安装与配置 <a class="header-anchor" href="#_2-vitepress-安装与配置" aria-label="Permalink to &quot;2 Vitepress 安装与配置&quot;">​</a></h2><h3 id="_2-1-vitepress-安装" tabindex="-1">2.1 Vitepress 安装 <a class="header-anchor" href="#_2-1-vitepress-安装" aria-label="Permalink to &quot;2.1 Vitepress 安装&quot;">​</a></h3><p><a href="https://vitepress.dev/" target="_blank" rel="noreferrer">官网</a>;</p><p>框架抄的<a href="https://arch.icekylin.online/" target="_blank" rel="noreferrer">Arch-guide</a>；写到 json 里面直接用 pnpm 安装；</p><p>用的 pnpm，更新用<code>pnpm i</code> , <a href="https://typicode.github.io/husky/guide.html" target="_blank" rel="noreferrer">husky</a>虽然有但是没用过.</p><h3 id="_2-2-vitepress-根据内容自动编写侧边栏-index" tabindex="-1">2.2 Vitepress 根据内容自动编写侧边栏 Index <a class="header-anchor" href="#_2-2-vitepress-根据内容自动编写侧边栏-index" aria-label="Permalink to &quot;2.2 Vitepress 根据内容自动编写侧边栏 Index&quot;">​</a></h3><p>不会任何 ts，所以用了 vitepress-plugin-auto-sidebar。</p><p>顶端导航手写的。</p><h3 id="_2-3-vitepress-algolia-搜索" tabindex="-1">2.3 Vitepress Algolia 搜索 <a class="header-anchor" href="#_2-3-vitepress-algolia-搜索" aria-label="Permalink to &quot;2.3 Vitepress Algolia 搜索&quot;">​</a></h3><p>沙皮玩意儿，一坨屎，不想弄了，没有就没有吧。</p><h2 id="_3-mac-下-typora-配合调教" tabindex="-1">3 mac 下 typora 配合调教 <a class="header-anchor" href="#_3-mac-下-typora-配合调教" aria-label="Permalink to &quot;3 mac 下 typora 配合调教&quot;">​</a></h2><h3 id="_3-1-typora-直接拖拽-mac-截图的图片格式问题以及其解决方法-上传到-github" tabindex="-1">3.1 typora 直接拖拽 MAC 截图的图片格式问题以及其解决方法：上传到 github <a class="header-anchor" href="#_3-1-typora-直接拖拽-mac-截图的图片格式问题以及其解决方法-上传到-github" aria-label="Permalink to &quot;3.1 typora 直接拖拽 MAC 截图的图片格式问题以及其解决方法：上传到 github&quot;">​</a></h3><p>typora 有个非常不错的功能，用 mac 自带的截图直接拖到 typora 里面可以直接 Copy 一份到目标文件夹，并把路径转换为相对路径。以前都这么用过来的，结果发现 Mac 自带的时间格式里面有空格，自带的 html 解释器不能解释带空格的路径。解决方法是使用图床，于是采取了 picgo+github 图床的组合。</p><p><a href="https://picgo.github.io/PicGo-Doc/" target="_blank" rel="noreferrer">Picgo 文档</a></p><p>csdn 上的 picgo 的 config 他妈的乱写，浪费了我十分钟，这里找了另一篇<a href="https://www.jianshu.com/p/33e7da24ee36" target="_blank" rel="noreferrer">文章</a>，写一下步骤方便 cv：</p><ul><li>安装 npm 包管理器<code>brew install node</code></li><li>安装 picgo<code>npm install picgo -g</code></li><li>安装 github 插件<code>picgo install github-plus </code>理论上我不用 cdn 我也不需要这歌，不过无所谓了</li><li>安装重命名插件<code>picgo install rename-file</code> 重命名</li><li><code>vim ~/.picgo/config.json</code></li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;picBed&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;uploader&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;githubPlus&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;current&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;githubPlus&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;githubPlus&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;branch&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;main&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;customUrl&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;origin&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;github&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;repo&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;yorkitokang/trimof_image&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;path&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;images&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">&quot;token&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;xxx&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;picgoPlugins&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;picgo-plugin-github-plus&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;picgo-plugin-rename-file&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;picgo-plugin-rename-file&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;format&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;{y}_{m}_{d}_{hash}_{origin}_{rand:6}&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;picBed&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;uploader&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;githubPlus&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;current&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;githubPlus&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;githubPlus&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;branch&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;main&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;customUrl&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;origin&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;github&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;repo&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;yorkitokang/trimof_image&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;path&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;images&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">&quot;token&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;xxx&quot;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;picgoPlugins&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;picgo-plugin-github-plus&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;picgo-plugin-rename-file&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;picgo-plugin-rename-file&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;format&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;{y}_{m}_{d}_{hash}_{origin}_{rand:6}&quot;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><strong>注意：不要写//注释，不然他会报错</strong></p><p><code>customUrl</code>是留给 github 的中国 cdn 的，我没用成功，所以我留空</p><p><code>token</code>在<a href="https://github.com/settings/tokens" target="_blank" rel="noreferrer">这个地方</a>生成</p><p>typora 配置很简单，<a href="https://support.typora.io/Upload-Image" target="_blank" rel="noreferrer">官网</a>说的很明白。</p><p>最终实现效果，截图然后拖到 typora 里面，自动上传到 github 图床然后博客就能访问了，爽！</p><h2 id="_4-git-服务器自动部署" tabindex="-1">4 git 服务器自动部署 <a class="header-anchor" href="#_4-git-服务器自动部署" aria-label="Permalink to &quot;4 git 服务器自动部署&quot;">​</a></h2><h3 id="_4-3-自定义域名cname的自动部署" tabindex="-1">4.3 自定义域名CNAME的自动部署 <a class="header-anchor" href="#_4-3-自定义域名cname的自动部署" aria-label="Permalink to &quot;4.3 自定义域名CNAME的自动部署&quot;">​</a></h3><p>在使用github pages的自动部署时，发现了一个问题</p><p><img src="https://raw.githubusercontent.com/yorkitokang/trimof_image/main/images/2023_08_29_f4f749bc5754ab7dd97748b303d5d9ed.png" alt="screenshot 2023-08-29 at 2.40.53 PM"></p><h2 id="_5-接入谷歌-bing" tabindex="-1">5 接入谷歌，bing <a class="header-anchor" href="#_5-接入谷歌-bing" aria-label="Permalink to &quot;5 接入谷歌，bing&quot;">​</a></h2><p>还在想怎么搞</p>`,48),p=[l];function t(r,i,c,u,h,E){return a(),n("div",null,p)}const d=s(o,[["render",t]]);export{g as __pageData,d as default};
