import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.1fa2d359.js";const u=JSON.parse('{"title":"ROS2 Navigation Sentry Deployment Guide","description":"","frontmatter":{},"headers":[],"relativePath":"projects/Competitions/ROS2 Navigation Sentry Deployment Guide.md","filePath":"projects/Competitions/ROS2 Navigation Sentry Deployment Guide.md","lastUpdated":1694011502000}'),o={name:"projects/Competitions/ROS2 Navigation Sentry Deployment Guide.md"},p=l(`<h1 id="ros2-navigation-sentry-deployment-guide" tabindex="-1">ROS2 Navigation Sentry Deployment Guide <a class="header-anchor" href="#ros2-navigation-sentry-deployment-guide" aria-label="Permalink to &quot;ROS2 Navigation Sentry Deployment Guide&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#_1-dependencies">1 Dependencies</a><ul><li><a href="#_1-1-livox-sdk2">1.1 livox_sdk2</a></li><li><a href="#_1-2-third-packages">1.2 Third Packages</a></li><li><a href="#_1-3-navigation2-ros2-navigation">1.3 navigation2 (ros2 navigation)</a></li><li><a href="#_1-4-sentry-serial-node">1.4 sentry_serial_node</a></li><li><a href="#_1-5-pointcloud-to-laserscan">1.5 Pointcloud to Laserscan</a></li></ul></li><li><a href="#_2-tuning-and-configuration-guide">2 Tuning and Configuration Guide</a><ul><li><a href="#_2-1-fast-lio">2.1 FAST_LIO</a></li><li><a href="#_2-2-sentry-description">2.2 Sentry Description</a></li><li><a href="#_2-3-navigation">2.3 Navigation</a></li></ul></li><li><a href="#_3-map">3 Map</a><ul><li><a href="#_3-1-make-and-save-a-map">3.1 Make and Save a Map</a></li><li><a href="#_3-2-the-projection-from-actual-map-and-referee-system">3.2 The Projection from Actual Map and Referee System</a></li></ul></li></ul></nav><h2 id="_1-dependencies" tabindex="-1">1 Dependencies <a class="header-anchor" href="#_1-dependencies" aria-label="Permalink to &quot;1 Dependencies&quot;">​</a></h2><blockquote><p>There&#39;re no <code>rosdep</code> commands because building from source is recommended.</p></blockquote><h3 id="_1-1-livox-sdk2" tabindex="-1">1.1 livox_sdk2 <a class="header-anchor" href="#_1-1-livox-sdk2" aria-label="Permalink to &quot;1.1 livox_sdk2&quot;">​</a></h3><p>Follow the official guide.</p><p><a href="https://github.com/Livox-SDK/Livox-SDK2" target="_blank" rel="noreferrer">livox sdk github</a></p><h3 id="_1-2-third-packages" tabindex="-1">1.2 Third Packages <a class="header-anchor" href="#_1-2-third-packages" aria-label="Permalink to &quot;1.2 Third Packages&quot;">​</a></h3><p>Third packages are included in our gitlab project due to stability issues. Don&#39;t use the official packages.</p><p>We have made some changes from the original packages.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://mirrors.sustech.edu.cn/git/artinx/third_package.git</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--branch</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">develop</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://mirrors.sustech.edu.cn/git/artinx/third_package.git</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--branch</span><span style="color:#24292E;"> </span><span style="color:#032F62;">develop</span></span></code></pre></div><h4 id="_1-2-1-livox-ros-driver2" tabindex="-1">1.2.1 livox_ros_driver2 <a class="header-anchor" href="#_1-2-1-livox-ros-driver2" aria-label="Permalink to &quot;1.2.1 livox_ros_driver2&quot;">​</a></h4><p>Go to package directory and build it using the <code>build.sh</code> script.</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">./build.sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ROS2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">./build.sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ROS2</span></span></code></pre></div><p>After which, go to workspace directory and use <code>colcon build --symlink-install</code> to build the whole packages.</p><p>Next, you have to set up static ip for mid-360.Follow the instructions on the <a href="https://terra-1-g.djicdn.com/65c028cd298f4669a7f0e40e50ba1131/Download/update/Livox%20Mid%20Series%20User%20Manual%20(CN).pdf" target="_blank" rel="noreferrer">manual</a>. When you are connected to mid-360, its route would be located at <code>192.168.1.xx</code>. Set up your ethernets&#39; ip to <code>192.168.1.xx</code> as well(Follow the instructions on this <a href="https://blog.csdn.net/hahalim/article/details/129414327" target="_blank" rel="noreferrer">guide</a>)</p><p>If you want to connect to lidar on-boot, use <code>netplan</code> to do the job. However, using <code>netplan</code> would unable the remote-desktop function. Adding a router to distribute the ip would be a solution, but was not tried yet.</p><p>To learn more about mid-360, go to <a href="https://livox-wiki-cn.readthedocs.io/zh_CN/latest/tutorials/new_product/mid360/mid360.html" target="_blank" rel="noreferrer">inofficial mid-360 doc site</a>.</p><h4 id="_1-2-2-fast-lio" tabindex="-1">1.2.2 Fast lio <a class="header-anchor" href="#_1-2-2-fast-lio" aria-label="Permalink to &quot;1.2.2 Fast lio&quot;">​</a></h4><p><a href="https://github.com/hku-mars/FAST_LIO" target="_blank" rel="noreferrer">Fast-lio Github</a></p><p><code>Fast-lio</code> is an odometry predicting algorithm combining IMU and point cloud data. Basically, if you can get the odometry, you can do SLAM(Simultaneously Localization and Mapping) easily.</p><p>To completely understand what SLAM is, I recommend you to read through <a href="https://github.com/qomo/LearnSensorFusion/blob/master/books/%E8%A7%86%E8%A7%89slam%E5%8D%81%E5%9B%9B%E8%AE%B2.pdf" target="_blank" rel="noreferrer">this book</a> written by Bo Gao.</p><p><code>Fast-lio</code> is broadcasting several msgs. <code>/odometry</code>, <code>/real_odometry</code> and <code>/cloud_registered</code>. <code>/odometry</code> is a stamped msg, showing the position relative to the initial position of lidar.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Mid-360 take the pose of the lidar base when initialized as the the horizon plane of its axis. This will cause some problems but somehow solved by little tricks.</p></div><p>We&#39;re using fast-lio for ROS2, which is not officially supported. Compared to ROS1, the map accumulating function(save as a map) is not accomplished yet.</p><h3 id="_1-3-navigation2-ros2-navigation" tabindex="-1">1.3 navigation2 (ros2 navigation) <a class="header-anchor" href="#_1-3-navigation2-ros2-navigation" aria-label="Permalink to &quot;1.3 navigation2 (ros2 navigation)&quot;">​</a></h3><p><a href="https://github.com/ros-planning/navigation2" target="_blank" rel="noreferrer">navigation2 github</a></p><p>Navigation is a huge project related to mountains of researches.</p><p>Building from source is recommended. Follow the official guide.</p><h3 id="_1-4-sentry-serial-node" tabindex="-1">1.4 sentry_serial_node <a class="header-anchor" href="#_1-4-sentry-serial-node" aria-label="Permalink to &quot;1.4 sentry_serial_node&quot;">​</a></h3><p><code>sentry_serial_node</code> is based on chenjun&#39;s RV framework, responsible for communicating with the lower computer.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>We&#39;re controlling gimbal to navigate in RMUC2023 due to differential control method. We would change that to controlling chassis in next season.</p></div><h3 id="_1-5-pointcloud-to-laserscan" tabindex="-1">1.5 Pointcloud to Laserscan <a class="header-anchor" href="#_1-5-pointcloud-to-laserscan" aria-label="Permalink to &quot;1.5 Pointcloud to Laserscan&quot;">​</a></h3><p>Pointcloud to laserscan is for 2d AMCL. The input is pointcloud msg /<code>cloud_registered</code> and the output is laser scan msg<code>/scan</code>.</p><h2 id="_2-tuning-and-configuration-guide" tabindex="-1">2 Tuning and Configuration Guide <a class="header-anchor" href="#_2-tuning-and-configuration-guide" aria-label="Permalink to &quot;2 Tuning and Configuration Guide&quot;">​</a></h2><div class="mermaid"> st=&gt;start: Begin io_livox=&gt;inputoutput: IMU+Lidar Msgs Input io_serial_in=&gt;inputoutput: Serial Input target=&gt;operation: Goal target_cond=&gt;condition: Check if there&#39;s a Goal fast_lio=&gt;operation: Fast_lio point_cloud_msg=&gt;operation: Filtered Pointcloud and Odometry costmap=&gt;operation: Local Costmap &amp; Global Costmap,Pointcloud to LaserScan &amp; AMCL global_path=&gt;operation: Global Path (by navfn or hybrid A*) controller=&gt;operation: Controller(Differential) io_serial_out=&gt;inputoutput: Serial Output ui_position=&gt;operation: Position In RMUC Map st(bottom)-&gt;io_livox-&gt;fast_lio-&gt;point_cloud_msg-&gt;costmap-&gt;io_serial_in-&gt;target_cond(yes)-&gt;global_path-&gt;controller-&gt;io_serial_out(left)-&gt;fast_lio(left) target_cond(no)-&gt;fast_lio(top) </div><h3 id="_2-1-fast-lio" tabindex="-1">2.1 FAST_LIO <a class="header-anchor" href="#_2-1-fast-lio" aria-label="Permalink to &quot;2.1 FAST_LIO&quot;">​</a></h3><p>In <code>config/mid360.yaml</code>,</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">preprocess</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">blind</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.5</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">lidar_type</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">                </span><span style="color:#6A737D;"># 1 for Livox serials LiDAR, 2 for Velodyne LiDAR, 3 for ouster LiDAR, </span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">scan_line</span><span style="color:#E1E4E8;">:  </span><span style="color:#79B8FF;">4</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">timestamp_unit</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">scan_rate</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">10</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">preprocess</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">blind</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.5</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">lidar_type</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">                </span><span style="color:#6A737D;"># 1 for Livox serials LiDAR, 2 for Velodyne LiDAR, 3 for ouster LiDAR, </span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">scan_line</span><span style="color:#24292E;">:  </span><span style="color:#005CC5;">4</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">timestamp_unit</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">scan_rate</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">10</span></span></code></pre></div><p><code>blind</code> is the distant from the lidar origin to the valid data sphere.</p><h3 id="_2-2-sentry-description" tabindex="-1">2.2 Sentry Description <a class="header-anchor" href="#_2-2-sentry-description" aria-label="Permalink to &quot;2.2 Sentry Description&quot;">​</a></h3><p>The <code>tf</code> information is concluded in a <code>urdf</code> file. Change the configuration if you want to change the position of lidar on your robot.</p><h3 id="_2-3-navigation" tabindex="-1">2.3 Navigation <a class="header-anchor" href="#_2-3-navigation" aria-label="Permalink to &quot;2.3 Navigation&quot;">​</a></h3><p><a href="https://navigation.ros.org/configuration/index.html" target="_blank" rel="noreferrer">Official Configuration Guide</a></p><h4 id="_2-3-1-amcl" tabindex="-1">2.3.1 AMCL <a class="header-anchor" href="#_2-3-1-amcl" aria-label="Permalink to &quot;2.3.1 AMCL&quot;">​</a></h4><p>AMCL is for relocalization, adjusting the tf between the initial pose of the odometry and</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">amcl</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">ros__parameters</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">alpha1</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.2</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">alpha2</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.2</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">alpha3</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.2</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">alpha4</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.2</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">alpha5</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.2</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#79B8FF;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">robot_model_type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;nav2_amcl::DifferentialMotionModel&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#79B8FF;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">tf_broadcast</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">amcl</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">ros__parameters</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">alpha1</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.2</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">alpha2</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.2</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">alpha3</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.2</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">alpha4</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.2</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">alpha5</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.2</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#005CC5;">...</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">robot_model_type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;nav2_amcl::DifferentialMotionModel&quot;</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#005CC5;">...</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">tf_broadcast</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span></code></pre></div><p><code>alphaX</code> are the estimation of noise level of your odomtry system, each representing the translational or angular noise.<a href="https://assets.researchsquare.com/files/rs-225880/v1_covered.pdf?c=1631856303" target="_blank" rel="noreferrer">Further Tuning Guide</a></p><p>Since we&#39;re using a really precise odomtry system, we would like to set the all 5 alphas to <code>0.0005</code> . If you don&#39;t want to use relocalization, set <code>tf_broadcast</code> to <code>false</code>, and use another node to broadcast the <code>tf</code> relationship between the <code>odom</code> and <code>map</code>.</p><h4 id="_2-3-2-controller-dwb" tabindex="-1">2.3.2 Controller (DWB) <a class="header-anchor" href="#_2-3-2-controller-dwb" aria-label="Permalink to &quot;2.3.2 Controller (DWB)&quot;">​</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">controller_server</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">ros__parameters</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">controller_frequency</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">20.0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">min_x_velocity_threshold</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.001</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">min_y_velocity_threshold</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.5</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">min_theta_velocity_threshold</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.001</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">failure_tolerance</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.3</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">general_goal_checker</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">stateful</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">True</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">plugin</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;nav2_controller::SimpleGoalChecker&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">xy_goal_tolerance</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.25</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">yaw_goal_tolerance</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.25</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># DWB parameters</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">FollowPath</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">plugin</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;dwb_core::DWBLocalPlanner&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">debug_trajectory_details</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">True</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">min_vel_x</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">min_vel_y</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">max_vel_x</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.26</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">max_vel_y</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">max_vel_theta</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1.0</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">min_speed_xy</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">max_speed_xy</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.26</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">min_speed_theta</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">acc_lim_x</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">2.5</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">acc_lim_y</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">acc_lim_theta</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3.2</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">decel_lim_x</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">-2.5</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">decel_lim_y</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">decel_lim_theta</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">-3.2</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">vx_samples</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">20</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">vy_samples</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">5</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">vtheta_samples</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">20</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">sim_time</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1.7</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">linear_granularity</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.05</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">angular_granularity</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.025</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">transform_tolerance</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.2</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">xy_goal_tolerance</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.25</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">...</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">controller_server</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">ros__parameters</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">controller_frequency</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">20.0</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">min_x_velocity_threshold</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.001</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">min_y_velocity_threshold</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.5</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">min_theta_velocity_threshold</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.001</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">failure_tolerance</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.3</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">...</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">general_goal_checker</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">stateful</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">True</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">plugin</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;nav2_controller::SimpleGoalChecker&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">xy_goal_tolerance</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.25</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">yaw_goal_tolerance</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.25</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># DWB parameters</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">FollowPath</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">plugin</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;dwb_core::DWBLocalPlanner&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">debug_trajectory_details</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">True</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">min_vel_x</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">min_vel_y</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">max_vel_x</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.26</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">max_vel_y</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">max_vel_theta</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1.0</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">min_speed_xy</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">max_speed_xy</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.26</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">min_speed_theta</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">acc_lim_x</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">2.5</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">acc_lim_y</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">acc_lim_theta</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3.2</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">decel_lim_x</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">-2.5</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">decel_lim_y</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">decel_lim_theta</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">-3.2</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">vx_samples</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">20</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">vy_samples</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">5</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">vtheta_samples</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">20</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">sim_time</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1.7</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">linear_granularity</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.05</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">angular_granularity</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.025</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">transform_tolerance</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.2</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">xy_goal_tolerance</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.25</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#005CC5;">...</span></span></code></pre></div><p>Either using differential or omnidirectional controller is determined on your parameters. Becareful not to set the yaw value to zero or the controller server would collapse. Rest of the parameters are trivial according to their names.</p><h4 id="_2-3-3-costmap" tabindex="-1">2.3.3 Costmap <a class="header-anchor" href="#_2-3-3-costmap" aria-label="Permalink to &quot;2.3.3 Costmap&quot;">​</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">local_costmap</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">local_costmap</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">ros__parameters</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">update_frequency</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">5.0</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">publish_frequency</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">2.0</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">global_frame</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">odom</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">robot_base_frame</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">base_link</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">rolling_window</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">width</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">height</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">resolution</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.05</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">robot_radius</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.22</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">plugins</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;voxel_layer&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;inflation_layer&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">inflation_layer</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">plugin</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;nav2_costmap_2d::InflationLayer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">cost_scaling_factor</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3.0</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">inflation_radius</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.55</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">voxel_layer</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">plugin</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;nav2_costmap_2d::VoxelLayer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">enabled</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">True</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">publish_voxel_map</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">True</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">origin_z</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">z_resolution</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.05</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">z_voxels</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">16</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">max_obstacle_height</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">2.0</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">mark_threshold</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">observation_sources</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">scan</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">scan</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">topic</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/scan</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">max_obstacle_height</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">2.0</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">clearing</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">True</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">marking</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">True</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">data_type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;LaserScan&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">raytrace_max_range</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3.0</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">raytrace_min_range</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">obstacle_max_range</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">2.5</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">obstacle_min_range</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">local_costmap</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">local_costmap</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">ros__parameters</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">update_frequency</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">5.0</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">publish_frequency</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">2.0</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">global_frame</span><span style="color:#24292E;">: </span><span style="color:#032F62;">odom</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">robot_base_frame</span><span style="color:#24292E;">: </span><span style="color:#032F62;">base_link</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">rolling_window</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">width</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">height</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">resolution</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.05</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">robot_radius</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.22</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">plugins</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;voxel_layer&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;inflation_layer&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">inflation_layer</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">plugin</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;nav2_costmap_2d::InflationLayer&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">cost_scaling_factor</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3.0</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">inflation_radius</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.55</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">voxel_layer</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">plugin</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;nav2_costmap_2d::VoxelLayer&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">enabled</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">True</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">publish_voxel_map</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">True</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">origin_z</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">z_resolution</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.05</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">z_voxels</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">16</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">max_obstacle_height</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">2.0</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">mark_threshold</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">observation_sources</span><span style="color:#24292E;">: </span><span style="color:#032F62;">scan</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">scan</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">topic</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/scan</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">max_obstacle_height</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">2.0</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">clearing</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">True</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">marking</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">True</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">data_type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;LaserScan&quot;</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">raytrace_max_range</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3.0</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">raytrace_min_range</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">obstacle_max_range</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">2.5</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">obstacle_min_range</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0</span></span></code></pre></div><p><code>robot_radius</code> can be changed to <code>footprint</code> for square robot chassis. <a href="https://navigation.ros.org/configuration/packages/configuring-costmaps.html" target="_blank" rel="noreferrer">Checkt this</a> for further information.</p><p><code>raytrace_range</code> should conclude the <code>obstacle_range</code> in order to rapidly remove the trace of the dynamic obstacle.</p><p>Because we&#39;re using pointcloud to get costmap, change the datatype and topic under <code>scan</code>.</p><p><code>global_costmap</code> is same as the <code>local_costmap</code>, presenting information for <code>path</code> calculation.</p><h2 id="_3-map" tabindex="-1">3 Map <a class="header-anchor" href="#_3-map" aria-label="Permalink to &quot;3 Map&quot;">​</a></h2><h3 id="_3-1-make-and-save-a-map" tabindex="-1">3.1 Make and Save a Map <a class="header-anchor" href="#_3-1-make-and-save-a-map" aria-label="Permalink to &quot;3.1 Make and Save a Map&quot;">​</a></h3><p><strong>Save a 3D map and project it to make a 2D map</strong></p><p>In fast-lio, change the save map parameter from false to true, you will get a 3D pcd file. Then, using <code>pcd2pgm</code> <a href="https://github.com/Hinson-A/pcd2pgm_package" target="_blank" rel="noreferrer">link</a> you can get a 2D map you like.</p><p><strong>Save a 2D map using <code>/scan</code> and gmapping</strong></p><p>Using <code>gmapping</code> and our <code>/scan</code> topic, you can save a map using map_saver.</p><h3 id="_3-2-the-projection-from-actual-map-and-referee-system" tabindex="-1">3.2 The Projection from Actual Map and Referee System <a class="header-anchor" href="#_3-2-the-projection-from-actual-map-and-referee-system" aria-label="Permalink to &quot;3.2 The Projection from Actual Map and Referee System&quot;">​</a></h3><p>The manipulator of the sentry will pass a point on the Referee System which is different from position of the real terrain. I used Least Square to calculate the linear projection.</p><p><a href="trimof.github.io/pdf/mpc.pdf" target="_blank">PDF.</a></p>`,67),e=[p];function t(r,c,i,y,E,d){return a(),n("div",null,e)}const _=s(o,[["render",t]]);export{u as __pageData,_ as default};
